# Lighteré‡åŒ–äº¤æ˜“ç¨‹åº

åŸºäºLighteräº¤æ˜“æ‰€APIçš„é‡åŒ–äº¤æ˜“ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§äº¤æ˜“ç­–ç•¥ã€é£é™©ç®¡ç†å’Œå›æµ‹åŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ **å¤šç§äº¤æ˜“ç­–ç•¥**: å‡å€¼å›å½’ã€åŠ¨é‡ã€å¥—åˆ©ã€UT Botç­‰ç­–ç•¥
- ğŸ›¡ï¸ **é£é™©ç®¡ç†**: ä»“ä½æ§åˆ¶ã€æ­¢æŸæ­¢ç›ˆã€é£é™©ç›‘æ§
- ğŸ“Š **å¤šæ•°æ®æºæ”¯æŒ**: Lighteräº¤æ˜“æ‰€ã€TradingViewç­‰æ•°æ®æº
- ğŸ”„ **å›æµ‹ç³»ç»Ÿ**: å†å²æ•°æ®å›æµ‹å’Œæ€§èƒ½åˆ†æ
- âš™ï¸ **é…ç½®ç®¡ç†**: çµæ´»çš„é…ç½®ç³»ç»Ÿå’Œå‚æ•°è°ƒæ•´
- ğŸ“ **æ—¥å¿—ç›‘æ§**: å®Œæ•´çš„æ—¥å¿—è®°å½•å’Œç›‘æ§

## é¡¹ç›®ç»“æ„

```
quant_trading/
â”œâ”€â”€ core/                    # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ trading_engine.py   # äº¤æ˜“å¼•æ“
â”‚   â”œâ”€â”€ data_manager.py     # æ•°æ®ç®¡ç†å™¨
â”‚   â”œâ”€â”€ risk_manager.py     # é£é™©ç®¡ç†å™¨
â”‚   â”œâ”€â”€ position_manager.py # ä»“ä½ç®¡ç†å™¨
â”‚   â””â”€â”€ order_manager.py    # è®¢å•ç®¡ç†å™¨
â”œâ”€â”€ strategies/              # äº¤æ˜“ç­–ç•¥
â”‚   â”œâ”€â”€ base_strategy.py    # ç­–ç•¥åŸºç±»
â”‚   â”œâ”€â”€ mean_reversion.py   # å‡å€¼å›å½’ç­–ç•¥
â”‚   â”œâ”€â”€ momentum.py         # åŠ¨é‡ç­–ç•¥
â”‚   â”œâ”€â”€ arbitrage.py        # å¥—åˆ©ç­–ç•¥
â”‚   â””â”€â”€ ut_bot.py          # UT Botç­–ç•¥
â”œâ”€â”€ data_sources/           # æ•°æ®æºæ¨¡å—
â”‚   â”œâ”€â”€ base_data_source.py # æ•°æ®æºåŸºç±»
â”‚   â”œâ”€â”€ lighter_data_source.py # Lighteræ•°æ®æº
â”‚   â””â”€â”€ tradingview_data_source.py # TradingViewæ•°æ®æº
â”œâ”€â”€ backtesting/            # å›æµ‹æ¨¡å—
â”‚   â”œâ”€â”€ backtest_engine.py  # å›æµ‹å¼•æ“
â”‚   â””â”€â”€ backtest_result.py  # å›æµ‹ç»“æœ
â”œâ”€â”€ utils/                  # å·¥å…·æ¨¡å—
â”‚   â”œâ”€â”€ config.py          # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ logger.py          # æ—¥å¿—ç®¡ç†
â”‚   â”œâ”€â”€ data_utils.py      # æ•°æ®å¤„ç†å·¥å…·
â”‚   â””â”€â”€ math_utils.py      # æ•°å­¦å·¥å…·
â””â”€â”€ __init__.py
```

## å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

## é…ç½®è®¾ç½®

1. å¤åˆ¶é…ç½®æ–‡ä»¶æ¨¡æ¿ï¼š
```bash
cp config.yaml.example config.yaml
```

2. ç¼–è¾‘ `config.yaml` æ–‡ä»¶ï¼Œé…ç½®Lighteräº¤æ˜“æ‰€å‚æ•°ï¼š
```yaml
lighter:
  base_url: "https://testnet.zklighter.elliot.ai"  # æˆ–ä¸»ç½‘åœ°å€
  api_key_private_key: "your_api_key_private_key"
  account_index: 0
  api_key_index: 0
```

## ä½¿ç”¨æ–¹æ³•

### 1. å®ç›˜äº¤æ˜“

è¿è¡Œä¸»ç¨‹åºï¼š
```bash
python main.py --strategy mean_reversion --market 0
```

å‚æ•°è¯´æ˜ï¼š
- `--strategy`: ç­–ç•¥ç±»å‹ (mean_reversion, momentum, arbitrage, ut_bot, all)
- `--market`: å¸‚åœºID
- `--config`: é…ç½®æ–‡ä»¶è·¯å¾„
- `--dry-run`: æ¨¡æ‹Ÿè¿è¡Œæ¨¡å¼

### 2. å›æµ‹

è¿è¡Œå›æµ‹ç¨‹åºï¼š
```bash
python backtest.py --strategy mean_reversion --days 30
```

å‚æ•°è¯´æ˜ï¼š
- `--strategy`: ç­–ç•¥ç±»å‹
- `--days`: å›æµ‹å¤©æ•°
- `--config`: é…ç½®æ–‡ä»¶è·¯å¾„

## ç­–ç•¥è¯´æ˜

### å‡å€¼å›å½’ç­–ç•¥ (Mean Reversion)
- åŸºäºä»·æ ¼åç¦»å‡å€¼çš„ç­–ç•¥
- å½“ä»·æ ¼åç¦»å‡å€¼è¶…è¿‡é˜ˆå€¼æ—¶å¼€ä»“
- é€‚åˆéœ‡è¡å¸‚åœº

### åŠ¨é‡ç­–ç•¥ (Momentum)
- åŸºäºä»·æ ¼åŠ¨é‡çš„ç­–ç•¥
- è·Ÿéšè¶‹åŠ¿æ–¹å‘å¼€ä»“
- é€‚åˆè¶‹åŠ¿å¸‚åœº

### å¥—åˆ©ç­–ç•¥ (Arbitrage)
- åŸºäºä¸åŒå¸‚åœºé—´ä»·æ ¼å·®å¼‚çš„ç­–ç•¥
- åŒæ—¶åœ¨ä¸¤ä¸ªå¸‚åœºè¿›è¡Œç›¸åæ“ä½œ
- é€‚åˆä»·æ ¼å·®å¼‚è¾ƒå¤§çš„å¸‚åœº

### UT Botç­–ç•¥ (UT Bot)
- åŸºäºTradingView UT Bot Alertsçš„ç­–ç•¥
- ä½¿ç”¨ATRè¿½è¸ªæ­¢æŸæœºåˆ¶
- æ”¯æŒHeikin Ashièœ¡çƒ›å›¾
- é€‚åˆè¶‹åŠ¿è·Ÿè¸ªäº¤æ˜“

## é£é™©ç®¡ç†

ç³»ç»Ÿå†…ç½®å¤šç§é£é™©ç®¡ç†åŠŸèƒ½ï¼š

- **ä»“ä½æ§åˆ¶**: é™åˆ¶å•ä¸ªä»“ä½çš„æœ€å¤§æ¯”ä¾‹
- **æ—¥äºæŸé™åˆ¶**: æ§åˆ¶æ¯æ—¥æœ€å¤§äºæŸ
- **å›æ’¤æ§åˆ¶**: é™åˆ¶æœ€å¤§å›æ’¤å¹…åº¦
- **è®¢å•é¢‘ç‡é™åˆ¶**: é˜²æ­¢è¿‡åº¦äº¤æ˜“
- **æ æ†æ§åˆ¶**: é™åˆ¶æœ€å¤§æ æ†å€æ•°

## é…ç½®å‚æ•°

### äº¤æ˜“é…ç½®
```yaml
trading:
  tick_interval: 1.0  # ä¸»å¾ªç¯é—´éš”ï¼ˆç§’ï¼‰
  max_concurrent_strategies: 5  # æœ€å¤§å¹¶å‘ç­–ç•¥æ•°
```

### é£é™©é…ç½®
```yaml
risk:
  max_position_size: 0.1  # æœ€å¤§ä»“ä½æ¯”ä¾‹
  max_daily_loss: 0.05    # æœ€å¤§æ—¥äºæŸæ¯”ä¾‹
  max_drawdown: 0.15      # æœ€å¤§å›æ’¤æ¯”ä¾‹
  max_leverage: 10.0      # æœ€å¤§æ æ†å€æ•°
```

### æ•°æ®æºé…ç½®
```yaml
data_sources:
  primary: "lighter"  # ä¸»æ•°æ®æº: lighter, tradingview
  tradingview:
    enabled: true  # æ˜¯å¦å¯ç”¨TradingViewæ•°æ®æº
    session_id: "qs_1"
    user_agent: "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"
    symbol_mapping:  # äº¤æ˜“å¯¹æ˜ å°„
      "BTC_USDT": "BTCUSDT"
      "ETH_USDT": "ETHUSDT"
```

### ç­–ç•¥é…ç½®
```yaml
strategies:
  mean_reversion:
    enabled: true
    market_id: 0
    lookback_period: 20
    threshold: 2.0
    position_size: 0.1
    stop_loss: 0.02
    take_profit: 0.01
    
  ut_bot:
    enabled: true
    market_id: 0
    key_value: 1.0
    atr_period: 10
    use_heikin_ashi: false
    position_size: 0.1
    stop_loss: 0.02
    take_profit: 0.01
```

## æ—¥å¿—ç›‘æ§

ç³»ç»Ÿæä¾›å®Œæ•´çš„æ—¥å¿—è®°å½•åŠŸèƒ½ï¼š

- **æ§åˆ¶å°è¾“å‡º**: å®æ—¶æ˜¾ç¤ºäº¤æ˜“çŠ¶æ€
- **æ–‡ä»¶è®°å½•**: ä¿å­˜è¯¦ç»†æ—¥å¿—åˆ°æ–‡ä»¶
- **æ—¥å¿—çº§åˆ«**: æ”¯æŒDEBUGã€INFOã€WARNINGã€ERRORçº§åˆ«

## å›æµ‹åŠŸèƒ½

å›æµ‹ç³»ç»Ÿæ”¯æŒï¼š

- **å†å²æ•°æ®å›æµ‹**: ä½¿ç”¨å†å²æ•°æ®æµ‹è¯•ç­–ç•¥
- **æ€§èƒ½æŒ‡æ ‡**: è®¡ç®—æ”¶ç›Šç‡ã€å¤æ™®æ¯”ç‡ã€æœ€å¤§å›æ’¤ç­‰
- **å¯è§†åŒ–**: ç”Ÿæˆæƒç›Šæ›²çº¿å’Œå›æ’¤å›¾è¡¨
- **äº¤æ˜“åˆ†æ**: è¯¦ç»†çš„äº¤æ˜“è®°å½•å’Œåˆ†æ

## æ³¨æ„äº‹é¡¹

1. **æµ‹è¯•ç¯å¢ƒ**: å»ºè®®å…ˆåœ¨æµ‹è¯•ç½‘ç¯å¢ƒæµ‹è¯•
2. **é£é™©æ§åˆ¶**: åˆç†è®¾ç½®é£é™©å‚æ•°ï¼Œé¿å…è¿‡åº¦é£é™©
3. **èµ„é‡‘ç®¡ç†**: ä¸è¦æŠ•å…¥è¶…è¿‡æ‰¿å—èƒ½åŠ›çš„èµ„é‡‘
4. **ç­–ç•¥ç›‘æ§**: å®šæœŸæ£€æŸ¥ç­–ç•¥è¡¨ç°ï¼ŒåŠæ—¶è°ƒæ•´å‚æ•°
5. **ç½‘ç»œç¨³å®š**: ç¡®ä¿ç½‘ç»œè¿æ¥ç¨³å®šï¼Œé¿å…æ–­çº¿å½±å“äº¤æ˜“

## å¼€å‘æ‰©å±•

### æ·»åŠ æ–°ç­–ç•¥

1. ç»§æ‰¿ `BaseStrategy` ç±»
2. å®ç°å¿…è¦çš„æ–¹æ³•ï¼š
   - `on_initialize()`
   - `on_start()`
   - `on_stop()`
   - `process_market_data()`

ç¤ºä¾‹ï¼š
```python
class MyStrategy(BaseStrategy):
    def __init__(self, config: Config):
        super().__init__("MyStrategy", config)
    
    async def on_initialize(self):
        # åˆå§‹åŒ–é€»è¾‘
        pass
    
    async def process_market_data(self, market_data):
        # ç­–ç•¥é€»è¾‘
        pass
```

### æ·»åŠ æ–°æŒ‡æ ‡

åœ¨ `utils/data_utils.py` ä¸­æ·»åŠ æ–°çš„æŠ€æœ¯æŒ‡æ ‡è®¡ç®—æ–¹æ³•ã€‚

## è®¸å¯è¯

MIT License

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤Issueæˆ–è”ç³»å¼€å‘å›¢é˜Ÿã€‚
